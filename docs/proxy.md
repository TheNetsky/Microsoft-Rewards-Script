# üåê Proxy Configuration

<div align="center">

**üîí Route traffic through proxy servers for privacy and flexibility**  
*Enhanced anonymity and geographic control*

</div>

---

## üéØ What Are Proxies?

Proxies act as **intermediaries** between your script and Microsoft's servers, providing enhanced privacy, geographic flexibility, and network management capabilities.

### **Key Benefits**
- üé≠ **IP masking** ‚Äî Hide your real IP address
- üåç **Geographic flexibility** ‚Äî Appear to browse from different locations
- ‚ö° **Rate limiting** ‚Äî Distribute requests across multiple IPs
- üîß **Network control** ‚Äî Route traffic through specific servers
- üîí **Privacy enhancement** ‚Äî Add layer of anonymity

---

## ‚öôÔ∏è Configuration

### **Basic Setup**
```json
{
  "browser": {
    "proxy": {
      "enabled": false,
      "server": "proxy.example.com:8080",
      "username": "",
      "password": "",
      "bypass": []
    }
  }
}
```

### **Configuration Options**

| Setting | Description | Example |
|---------|-------------|---------|
| `enabled` | Enable proxy usage | `true` |
| `server` | Proxy server address and port | `"proxy.example.com:8080"` |
| `username` | Proxy authentication username | `"proxyuser"` |
| `password` | Proxy authentication password | `"proxypass123"` |
| `bypass` | Domains to bypass proxy | `["localhost", "*.internal.com"]` |

---

## üîå Supported Proxy Types

### **HTTP Proxies**
**Most common type for web traffic**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "http://proxy.example.com:8080",
      "username": "user",
      "password": "pass"
    }
  }
}
```

### **HTTPS Proxies**
**Encrypted proxy connections**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "https://secure-proxy.example.com:8080",
      "username": "user",
      "password": "pass"
    }
  }
}
```

### **SOCKS Proxies**
**Support for SOCKS4 and SOCKS5**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "socks5://socks-proxy.example.com:1080",
      "username": "user",
      "password": "pass"
    }
  }
}
```

---

## üè¢ Popular Proxy Providers

### **Residential Proxies (Recommended)**
**High-quality IPs from real devices**

#### **Top Providers**
- **Bright Data** (formerly Luminati) ‚Äî Premium quality
- **Smartproxy** ‚Äî User-friendly dashboard
- **Oxylabs** ‚Äî Enterprise-grade
- **ProxyMesh** ‚Äî Developer-focused

#### **Configuration Example**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "rotating-residential.brightdata.com:22225",
      "username": "customer-username-session-random",
      "password": "your-password"
    }
  }
}
```

### **Datacenter Proxies**
**Fast and affordable server-based IPs**

#### **Popular Providers**
- **SquidProxies** ‚Äî Reliable performance
- **MyPrivateProxy** ‚Äî Dedicated IPs
- **ProxyRack** ‚Äî Budget-friendly
- **Storm Proxies** ‚Äî Rotating options

#### **Configuration Example**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "datacenter.squidproxies.com:8080",
      "username": "username",
      "password": "password"
    }
  }
}
```

### **Free Proxies**
**‚ö†Ô∏è Not recommended for production use**

#### **Risks**
- ‚ùå Unreliable connections
- ‚ùå Potential security issues
- ‚ùå Often blocked by services
- ‚ùå Poor performance

---

## üîê Authentication Methods

### **Username/Password (Most Common)**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "username": "your-username",
      "password": "your-password"
    }
  }
}
```

### **IP Whitelisting**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "username": "",
      "password": ""
    }
  }
}
```

**Setup Steps:**
1. Contact proxy provider
2. Provide your server's IP address
3. Configure whitelist in provider dashboard
4. Remove credentials from config

### **Session-Based Authentication**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "session-proxy.example.com:8080",
      "username": "customer-session-sticky123",
      "password": "your-password"
    }
  }
}
```

---

## üö´ Bypass Configuration

### **Local Development**
**Bypass proxy for local services**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "bypass": [
        "localhost",
        "127.0.0.1",
        "*.local",
        "*.internal"
      ]
    }
  }
}
```

### **Specific Domains**
**Route certain domains directly**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "bypass": [
        "*.microsoft.com",
        "login.live.com",
        "account.microsoft.com"
      ]
    }
  }
}
```

### **Advanced Patterns**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "bypass": [
        "*.intranet.*",
        "192.168.*.*",
        "10.*.*.*",
        "<local>"
      ]
    }
  }
}
```

---

## üéõÔ∏è Advanced Configurations

### **Per-Account Proxies**
**Different proxies for different accounts**
```json
{
  "accounts": [
    {
      "email": "user1@example.com",
      "password": "password1",
      "proxy": {
        "enabled": true,
        "server": "proxy1.example.com:8080"
      }
    },
    {
      "email": "user2@example.com", 
      "password": "password2",
      "proxy": {
        "enabled": true,
        "server": "proxy2.example.com:8080"
      }
    }
  ]
}
```

### **Failover Configuration**
**Multiple proxy servers for redundancy**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "servers": [
        "primary-proxy.example.com:8080",
        "backup-proxy.example.com:8080",
        "emergency-proxy.example.com:8080"
      ],
      "username": "user",
      "password": "pass"
    }
  }
}
```

### **Geographic Routing**
**Location-specific proxy selection**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "regions": {
        "us": "us-proxy.example.com:8080",
        "eu": "eu-proxy.example.com:8080", 
        "asia": "asia-proxy.example.com:8080"
      },
      "defaultRegion": "us"
    }
  }
}
```

---

## üîí Security & Environment Variables

### **Credential Protection**
**Secure proxy authentication**

**Environment Variables:**
```powershell
# Set in environment
$env:PROXY_USERNAME="your-username"
$env:PROXY_PASSWORD="your-password"
```

**Configuration:**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "username": "${PROXY_USERNAME}",
      "password": "${PROXY_PASSWORD}"
    }
  }
}
```

### **HTTPS Verification**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "verifySSL": true,
      "rejectUnauthorized": true
    }
  }
}
```

### **Connection Encryption**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "https://encrypted-proxy.example.com:8080",
      "tls": {
        "enabled": true,
        "version": "TLSv1.3"
      }
    }
  }
}
```

---

## üß™ Testing & Debugging

### **Manual Tests**
```bash
# Test proxy connection
curl --proxy proxy.example.com:8080 http://httpbin.org/ip

# Test with authentication
curl --proxy user:pass@proxy.example.com:8080 http://httpbin.org/ip

# Test geolocation
curl --proxy proxy.example.com:8080 http://ipinfo.io/json
```

### **Script Debug Mode**
```powershell
$env:DEBUG_PROXY=1; npm start
```

### **Health Check Script**
```bash
#!/bin/bash
PROXY="proxy.example.com:8080"
curl --proxy $PROXY --connect-timeout 10 http://httpbin.org/status/200
echo "Proxy health: $?"
```

---

## üõ†Ô∏è Troubleshooting

| Problem | Error | Solution |
|---------|-------|----------|
| **Connection Failed** | `ECONNREFUSED` | Verify server address/port; check firewall |
| **Auth Failed** | `407 Proxy Authentication Required` | Verify username/password; check IP whitelist |
| **Timeout** | `Request timeout` | Increase timeout values; try different server |
| **SSL Error** | `certificate verify failed` | Disable SSL verification; update certificates |

### **Common Error Messages**

#### **Connection Issues**
```
[ERROR] Proxy connection failed: ECONNREFUSED
```
**Solutions:**
- ‚úÖ Verify proxy server address and port
- ‚úÖ Check proxy server is running
- ‚úÖ Confirm firewall allows connections
- ‚úÖ Test with different proxy server

#### **Authentication Issues**
```
[ERROR] Proxy authentication failed: 407 Proxy Authentication Required
```
**Solutions:**
- ‚úÖ Verify username and password
- ‚úÖ Check account is active with provider
- ‚úÖ Confirm IP is whitelisted (if applicable)
- ‚úÖ Try different authentication method

#### **Performance Issues**
```
[ERROR] Proxy timeout: Request timeout
```
**Solutions:**
- ‚úÖ Increase timeout values
- ‚úÖ Check proxy server performance
- ‚úÖ Try different proxy server
- ‚úÖ Reduce concurrent connections

---

## ‚ö° Performance Optimization

### **Connection Settings**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "timeouts": {
        "connect": 30000,
        "request": 60000,
        "idle": 120000
      },
      "connectionPooling": true,
      "maxConnections": 10
    }
  }
}
```

### **Compression Settings**
```json
{
  "browser": {
    "proxy": {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "compression": true,
      "gzip": true
    }
  }
}
```

### **Monitoring Metrics**
- **Connection Success Rate** ‚Äî % of successful proxy connections
- **Response Time** ‚Äî Average request latency through proxy
- **Bandwidth Usage** ‚Äî Data transferred through proxy
- **Error Rate** ‚Äî % of failed requests via proxy

---

## üê≥ Container Integration

### **Docker Environment**
```dockerfile
# Dockerfile
ENV PROXY_ENABLED=true
ENV PROXY_SERVER=proxy.example.com:8080
ENV PROXY_USERNAME=user
ENV PROXY_PASSWORD=pass
```

### **Kubernetes ConfigMap**
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: rewards-proxy-config
data:
  proxy.json: |
    {
      "enabled": true,
      "server": "proxy.example.com:8080",
      "username": "user",
      "password": "pass"
    }
```

### **Environment-Specific**
```json
{
  "development": {
    "proxy": { "enabled": false }
  },
  "staging": {
    "proxy": {
      "enabled": true,
      "server": "staging-proxy.example.com:8080"
    }
  },
  "production": {
    "proxy": {
      "enabled": true,
      "server": "prod-proxy.example.com:8080"
    }
  }
}
```

---

## üìä Best Practices

### **Proxy Selection**
- üèÜ **Residential > Datacenter** ‚Äî Better for avoiding detection
- üí∞ **Paid > Free** ‚Äî Reliability and security
- üîÑ **Multiple providers** ‚Äî Redundancy and failover
- üåç **Geographic diversity** ‚Äî Flexibility and compliance

### **Configuration Management**
- üîë **Environment variables** ‚Äî Secure credential storage
- üß™ **Test before deploy** ‚Äî Verify configuration works
- üìä **Monitor performance** ‚Äî Track availability and speed
- üîÑ **Backup configs** ‚Äî Ready failover options

### **Security Guidelines**
- üîí **HTTPS proxies** ‚Äî Encrypted connections when possible
- üõ°Ô∏è **SSL verification** ‚Äî Verify certificates
- üîÑ **Rotate credentials** ‚Äî Regular password updates
- üëÅÔ∏è **Monitor access** ‚Äî Watch for unauthorized usage

---

## ‚öñÔ∏è Legal & Compliance

### **Terms of Service**
- üìã Review Microsoft's Terms of Service
- üìÑ Understand proxy provider's acceptable use policy
- üåç Ensure compliance with local regulations
- üó∫Ô∏è Consider geographic restrictions

### **Data Privacy**
- üîç Understand data flow through proxy
- üìù Review proxy provider's data retention policies
- üîê Implement additional encryption if needed
- üìä Monitor proxy logs and access

### **Rate Limiting**
- ‚è±Ô∏è Respect Microsoft's rate limits
- ‚è∏Ô∏è Implement proper delays between requests
- üö¶ Monitor for IP blocking or throttling
- üîÑ Use proxy rotation to distribute load

---

## üîó Related Guides

- **[Getting Started](./getting-started.md)** ‚Äî Initial setup and configuration
- **[Security](./security.md)** ‚Äî Privacy and data protection
- **[Docker](./docker.md)** ‚Äî Container deployment with proxies
- **[Humanization](./humanization.md)** ‚Äî Natural behavior patterns